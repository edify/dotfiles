#!/bin/sh

set -e

echo 'Installing homebrew'
ruby -e "$(curl -fsSL https://raw.github.com/Homebrew/homebrew/go/install)"

echo 'Installing homebrew software'
brew bundle ~/.config/homebrew/Brewfile

echo 'Linking launchd plist files'
ln -sfv /usr/local/opt/redis/*.plist ~/Library/LaunchAgents
ln -sfv /usr/local/opt/elasticsearch/*.plist ~/Library/LaunchAgents
ln -sfv /usr/local/opt/mariadb/*.plist ~/Library/LaunchAgents
ln -sfv /usr/local/opt/mongodb/*.plist ~/Library/LaunchAgents

echo 'Installing OH-MY-ZSH'
curl -L http://install.ohmyz.sh | sh

echo 'Installing Ruby and Gems'
eval "$(rbenv init -)"
rbenv install 2.1.1
rbenv global 2.1.1
gem install bundler
rbenv rehash
$(cd ~/.gems && bundle install)
